(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{189:function(n,s,a){"use strict";a.r(s);var e=a(0),t=Object(e.a)({},(function(){this._self._c;return this._m(0)}),[function(){var n=this,s=n._self._c;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"wpf应用开发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#wpf应用开发"}},[n._v("#")]),n._v(" wpf应用开发")]),n._v(" "),s("h2",{attrs:{id:"_1-用wpf-加载显示图像，并通过鼠标悬浮时获取图像的像素坐标以及灰度，同时包含图像缩放功能，还有上下文菜单功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-用wpf-加载显示图像，并通过鼠标悬浮时获取图像的像素坐标以及灰度，同时包含图像缩放功能，还有上下文菜单功能"}},[n._v("#")]),n._v(" 1.用wpf 加载显示图像，并通过鼠标悬浮时获取图像的像素坐标以及灰度，同时包含图像缩放功能，还有上下文菜单功能")]),n._v(" "),s("p",[n._v("以下是使用WPF加载和显示图像，并通过鼠标悬浮获取图像的像素坐标和灰度值的一些示例代码：")]),n._v(" "),s("ul",[s("li",[n._v("1.XAML 布局：")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('<Window x:Class="ImageProcessing.MainWindow"\n        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"\n        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"\n        Title="MainWindow" Height="450" Width="800">\n    <Grid>\n        <Grid.RowDefinitions>\n            <RowDefinition Height="Auto"/>\n            <RowDefinition Height="*"/>\n        </Grid.RowDefinitions>\n\n        \x3c!-- 菜单 --\x3e\n        <Menu>\n            <MenuItem Header="_File">\n                <MenuItem Header="_Open" Click="Open_Click"/>\n                <Separator/>\n                <MenuItem Header="_Exit" Click="Exit_Click"/>\n            </MenuItem>\n            <MenuItem Header="_Options">\n                <MenuItem Header="_Zoom In" Click="ZoomIn_Click"/>\n                <MenuItem Header="_Zoom Out" Click="ZoomOut_Click"/>\n            </MenuItem>\n        </Menu>\n\n        \x3c!-- 显示图像的控件 --\x3e\n        <Image Name="image" Grid.Row="1" \n               Stretch="None" MouseMove="Image_MouseMove"/>\n    </Grid>\n</Window>\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br")])]),s("ul",[s("li",[n._v("2.C# 代码：")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("using System.Windows;\nusing System.Windows.Controls;\nusing System.Windows.Input;\nusing System.Windows.Media;\nusing Microsoft.Win32;\nusing System.IO;\n\nnamespace ImageProcessing\n{\n    public partial class MainWindow : Window\n    {\n        private BitmapSource bitmapSource; // 加载的位图\n        private double zoomFactor = 1.0; // 缩放系数\n\n        public MainWindow()\n        {\n            InitializeComponent();\n        }\n\n        // 打开文件并显示图像\n        private void Open_Click(object sender, RoutedEventArgs e)\n        {\n            OpenFileDialog openFileDialog = new OpenFileDialog();\n            if (openFileDialog.ShowDialog() == true)\n            {\n                byte[] bytes = File.ReadAllBytes(openFileDialog.FileName);\n                MemoryStream ms = new MemoryStream(bytes);\n                bitmapSource = BitmapFrame.Create(ms);\n                image.Source = bitmapSource;\n            }\n        }\n\n        // 退出应用程序\n        private void Exit_Click(object sender, RoutedEventArgs e)\n        {\n            Application.Current.Shutdown();\n        }\n\n        // 图像缩小\n        private void ZoomOut_Click(object sender, RoutedEventArgs e)\n        {\n            zoomFactor /= 2;\n            ScaleTransform scaleTransform = new ScaleTransform(zoomFactor, zoomFactor);\n            image.LayoutTransform = scaleTransform;\n        }\n\n        // 图像放大\n        private void ZoomIn_Click(object sender, RoutedEventArgs e)\n        {\n            zoomFactor *= 2;\n            ScaleTransform scaleTransform = new ScaleTransform(zoomFactor, zoomFactor);\n            image.LayoutTransform = scaleTransform;\n        }\n\n        // 获取鼠标悬浮的像素坐标和灰度值\n        private void Image_MouseMove(object sender, MouseEventArgs e)\n        {\n            Point point = e.GetPosition(image);\n            int x = (int)(point.X / zoomFactor);\n            int y = (int)(point.Y / zoomFactor);\n            if (bitmapSource != null && \n                x >= 0 && x < bitmapSource.PixelWidth && \n                y >= 0 && y < bitmapSource.PixelHeight)\n            {\n                CroppedBitmap croppedBitmap = \n                    new CroppedBitmap(bitmapSource, new Int32Rect(x, y, 1, 1));\n                byte[] pixels = new byte[4];\n                croppedBitmap.CopyPixels(pixels, 4, 0);\n                int grayScale = (pixels[0] + pixels[1] + pixels[2]) / 3;\n                // 处理获取到的像素坐标和灰度值\n            }\n        }\n    }\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br"),s("span",{staticClass:"line-number"},[n._v("61")]),s("br"),s("span",{staticClass:"line-number"},[n._v("62")]),s("br"),s("span",{staticClass:"line-number"},[n._v("63")]),s("br"),s("span",{staticClass:"line-number"},[n._v("64")]),s("br"),s("span",{staticClass:"line-number"},[n._v("65")]),s("br"),s("span",{staticClass:"line-number"},[n._v("66")]),s("br"),s("span",{staticClass:"line-number"},[n._v("67")]),s("br"),s("span",{staticClass:"line-number"},[n._v("68")]),s("br"),s("span",{staticClass:"line-number"},[n._v("69")]),s("br"),s("span",{staticClass:"line-number"},[n._v("70")]),s("br"),s("span",{staticClass:"line-number"},[n._v("71")]),s("br"),s("span",{staticClass:"line-number"},[n._v("72")]),s("br"),s("span",{staticClass:"line-number"},[n._v("73")]),s("br"),s("span",{staticClass:"line-number"},[n._v("74")]),s("br")])]),s("ul",[s("li",[n._v("此外，你可以使用WPF提供的ContextMenu类来实现上下文菜单功能。将ContextMenu对象添加到Image控件的ContextMenu属性即可。")])]),n._v(" "),s("h2",{attrs:{id:"_2-用wpf开发加载一个图像，并在图像中心位置画出红色的十字架，状态栏显示图像类型，大小，像素坐标，灰度，位深的功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-用wpf开发加载一个图像，并在图像中心位置画出红色的十字架，状态栏显示图像类型，大小，像素坐标，灰度，位深的功能"}},[n._v("#")]),n._v(" 2.用wpf开发加载一个图像，并在图像中心位置画出红色的十字架，状态栏显示图像类型，大小，像素坐标，灰度，位深的功能")]),n._v(" "),s("ul",[s("li",[n._v("1.下面是使用WPF开发加载图像并在中心位置画出红色十字架，并在状态栏上显示有关图像的信息的示例代码：")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('xml复制代码<Window x:Class="ImageInfo.MainWindow"\n        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"\n        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"\n        Title="Image Information" Height="350" Width="525">\n    <Grid>\n        <Image x:Name="imgMain" Stretch="Uniform" VerticalAlignment="Center" HorizontalAlignment="Center"/>\n        <Canvas x:Name="canvasCrosshair" VerticalAlignment="Center" HorizontalAlignment="Center"/>\n        <StatusBar x:Name="statBar" VerticalAlignment="Bottom" Height="20">\n            <StatusBarItem>\n                <TextBlock x:Name="tbxImageInfo" TextAlignment="Right"/>\n            </StatusBarItem>\n        </StatusBar>\n    </Grid>\n</Window>\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br")])]),s("p",[n._v("-2.我们需要添加一个"),s("code",[n._v("Image")]),n._v("控件和一个"),s("code",[n._v("Canvas")]),n._v("控件。 "),s("code",[n._v("Image")]),n._v("用于显示图像，"),s("code",[n._v("Canvas")]),n._v("用于绘制十字架。\n接下来是代码的C#部分：")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('csharp复制代码using System;\nusing System.Drawing;\nusing System.Windows;\nusing System.Windows.Controls;\nusing System.Windows.Media;\nusing System.Windows.Media.Imaging;\n\nnamespace ImageInfo\n{\n    public partial class MainWindow : Window\n    {\n        private BitmapImage _imageSource;\n\n        public MainWindow()\n        {\n            InitializeComponent();\n            this.Loaded += MainWindow_Loaded;\n        }\n\n        private void MainWindow_Loaded(object sender, RoutedEventArgs e)\n        {\n            // TODO: Set image path\n            string imagePath = "";\n\n            try\n            {\n                _imageSource = new BitmapImage(new Uri(imagePath));\n                imgMain.Source = _imageSource;\n\n                // Draw crosshair\n                Line lineX = new Line\n                {\n                    X1 = 0,\n                    Y1 = canvasCrosshair.ActualHeight / 2,\n                    X2 = canvasCrosshair.ActualWidth,\n                    Y2 = canvasCrosshair.ActualHeight / 2,\n                    Stroke = Brushes.Red,\n                    StrokeThickness = 2\n                };\n\n                Line lineY = new Line\n                {\n                    X1 = canvasCrosshair.ActualWidth / 2,\n                    Y1 = canvasCrosshair.ActualHeight / 2,\n                    X2 = canvasCrosshair.ActualWidth,\n                    Y2 = canvasCrosshair.ActualHeight / 2,\n                    Stroke = Brushes.Red,\n                    StrokeThickness = 2\n                };\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br")])]),s("h2",{attrs:{id:"_3-用wpf开发加载一个图像，并在图像中心位置画出红色的十字架，状态栏显示图像类型，大小，像素坐标，灰度，位深"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-用wpf开发加载一个图像，并在图像中心位置画出红色的十字架，状态栏显示图像类型，大小，像素坐标，灰度，位深"}},[n._v("#")]),n._v(" 3.用wpf开发加载一个图像，并在图像中心位置画出红色的十字架，状态栏显示图像类型，大小，像素坐标，灰度，位深")]),n._v(" "),s("ul",[s("li",[n._v("1.以下是使用WPF开发加载图像并在中心位置绘制红色十字架的代码示例，也包括状态栏显示图像元数据信息的实现：")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('xml复制代码<Window x:Class="ImageInfo.MainWindow"\n        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"\n        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"\n        Title="Image Information" Width="600" Height="600" Loaded="Window_Loaded">\n    <Grid>\n        <StatusBar DockPanel.Dock="Bottom">\n            <TextBlock x:Name="statusText"/>\n        </StatusBar>\n        <Canvas x:Name="canvas" Background="White"/>\n    </Grid>\n</Window>\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br")])]),s("ul",[s("li",[n._v("2.在MainWindow.xaml.cs文件中可以添加以下代码，用于加载图像、计算图像元数据并在界面中绘制。")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('using System;\nusing System.Drawing;\nusing System.Drawing.Imaging;\nusing System.IO;\nusing System.Windows;\nusing System.Windows.Controls;\nusing System.Windows.Media;\nusing System.Windows.Shapes;\nusing PixelFormat = System.Drawing.Imaging.PixelFormat;\n\npublic partial class MainWindow : Window\n{\n    public MainWindow()\n    {\n        InitializeComponent();\n    }\n\n    private void Window_Loaded(object sender, RoutedEventArgs e)\n    {\n        string imagePath = "image.png";\n        if (File.Exists(imagePath))\n        {\n            Image img = new Image();\n            Bitmap bmp = new Bitmap(imagePath);\n            \n            // 计算图像元数据\n            BitmapData data = bmp.LockBits(new Rectangle(0, 0, bmp.Width, bmp.Height), ImageLockMode.ReadOnly, bmp.PixelFormat);\n            double pixelSize = GetPixelSize(bmp);\n            string info = $"{bmp.Width} x {bmp.Height}, {pixelSize.ToString("F2")} μm/pixel, {data.PixelFormat.ToString()}";\n            bmp.UnlockBits(data);\n            \n            // 绘制图像和十字架\n            img.Source = ConvertBitmapToImageSource(bmp);\n            canvas.Children.Add(img);\n            double centerX = canvas.ActualWidth / 2.0;\n            double centerY = canvas.ActualHeight / 2.0;\n            Line lineX = new Line();\n            lineX.Stroke = Brushes.Red;\n            lineX.X1 = centerX - 10;\n            lineX.Y1 =\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br")])]),s("h2",{attrs:{id:"_4-整理一份can通信，modbus通信，tcp通信，http通信，mqtt-s7通信的功能实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-整理一份can通信，modbus通信，tcp通信，http通信，mqtt-s7通信的功能实现"}},[n._v("#")]),n._v(" 4.整理一份can通信，modbus通信，tcp通信，http通信，mqtt,S7通信的功能实现")]),n._v(" "),s("p",[n._v("以下是 CAN 通信、Modbus 通信、TCP 通信、HTTP 通信、MQTT 和 S7 通信的功能实现说明：")]),n._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[n._v("CAN 通信：CAN（Controller Area Network）总线通信协议是一种广泛使用于汽车和工业控制领域的通\n信协议。CAN 通信需要通过 CAN 控制器芯片将数据发送到总线上，而接收方则需要使用相同的协议进行解析并处理数据。\n在 CAN 通信中，需要编写与 CAN 控制器芯片通信的驱动程序，并设置相关参数（如位速率、过滤器等）。在\n数据发送时，需要将数据格式化为 CAN 数据帧并通过控制器进行传输；在接收数据时，需要对接收到的数据进行\n解析并提取需要的信息。")])]),n._v(" "),s("li",[s("p",[n._v("Modbus 通信：Modbus 是一种基于串行连接的协议，主要用于工业环境下的通信和控制。Modbus\n协议包含多种传输方式，如 RTU（Remote Terminal Unit）、ASCII 等，其中 RTU 是最常用的方式。\n在 Modbus 通信中，需要先建立连接（包括寻找从机、设定寻址方式、指定数据读写区域等），然后进行数\n据读写操作。对于 RTU 方式，还需要进行 CRC 校验以确保数据传输的正确性。")])]),n._v(" "),s("li",[s("p",[n._v("TCP 通信：TCP（Transmission Control Protocol）是基于连接的协议，用于实现可靠的数据传\n输。TCP 通信需要先建立连接，然后进行数据传输，最后再关闭连接。")])])]),n._v(" "),s("p",[n._v("在 TCP 通信中，需要编写服务器端和客户端程序，以实现双向的数据传输。服务器端需要等待客户端的\n连接请求，并响应相应的请求来建立起连接；而客户端则需要指定需要连接的服务器地址和端口号，以\n启动连接建立过程。在连接之后，就可以进行数据的读取和写入，当数据传输结束时，需要通过关闭连接来释放占用的资源。")]),n._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[n._v("HTTP 通信：HTTP（HyperText Transfer Protocol）是一种基于网络的协议，主要用于网页数据的传输。HTTP\n请求和响应都是基于文本格式，采用 MIME 类型来确定数据类型。")])]),n._v(" "),s("p",[n._v("在 HTTP 通信中，需要构造请求报文（包括请求方式、请求头部、请求主体等），并发送到服务器端；服务器\n接收到请求报文后，解析报文并生成响应报文（包括响应状态码、响应头部、响应主体等）发送回客户端。\n常见的 HTTP 请求方式包括 GET、POST、PUT、DELETE 等。")]),n._v(" "),s("ol",{attrs:{start:"6"}},[s("li",[n._v("MQTT 通信：MQTT（Message Queuing Telemetry Transport）是一种轻量级的消息通信协议，适用于低能耗\n设备和不稳定网络环境。MQTT 协议采用发布/订阅模式，通过消息代理（Broker）来实现消息的转发和路由。")])]),n._v(" "),s("p",[n._v("在 MQTT 通信中，需要编写客户端程序连接到指定的 Broker，并进行订阅或发布消息。当一个客户端发布一条\n消息时，Broker 会将该消息转发给所有订阅了该主题的其他客户端，以实现消息广播的效果。")]),n._v(" "),s("ol",{attrs:{start:"7"}},[s("li",[n._v("S7 通信：S7（Simatic S7）是西门子公司开发的一种工业控制器，S7 通信协议主要用于与该控制器的通信。S7\n通信采用基于 ISO-on-TCP 的协议，其中 ISO 协议是 OSI 参考模型中的数据链路层和物理层协议。")])]),n._v(" "),s("p",[n._v("在 S7 通信中，需要编写本地通信模块和远程通信模块，并使用不同的协议号和数据区域来进行数据传输。具体地说，需\n要建立一个 TCP 连接，并发送特定格式的消息来请求数据读写操作；服务端收到请求后，返回相关的响应消息，以完成\n数据传输的过程。")]),n._v(" "),s("h2",{attrs:{id:"_5-用c-实现动态库类的成员，参数指针，参数结构体的导出，分别用java-jna调用接口，和c-调用接口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-用c-实现动态库类的成员，参数指针，参数结构体的导出，分别用java-jna调用接口，和c-调用接口"}},[n._v("#")]),n._v(" 5.用C++ 实现动态库类的成员，参数指针，参数结构体的导出，分别用JAVA jna调用接口，和C#调用接口")]),n._v(" "),s("ul",[s("li",[n._v("以下是用 C++ 实现动态库类的成员，参数指针，参数结构体的导出，并分别用 Java JNA 和 C# 调用接口的大致流程：")])]),n._v(" "),s("ol",[s("li",[n._v("在 C++ 中实现动态库类的导出。可以使用 __declspec(dllexport) 关键字将类及其方法导出到动态库中，供其他程序调用。")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("cppCopy Codestruct Point {\n    int x;\n    int y;\n};\n\nclass __declspec(dllexport) MyClass {\npublic:\n    void DoSomething();\n    int Add(int a, int b);\n    void Swap(int* pa, int* pb);\n    void SetPoint(Point* p);\n};\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br")])]),s("ol",[s("li",[n._v("将 C++ 动态库文件编译成 .dll 文件。可以使用 Visual Studio 或其他开发环境来生成 .dll 文件。")]),n._v(" "),s("li",[n._v("使用 JNA 连接 C++ 动态库。可以使用 JNA 提供的 NativeLibrary 和 Function 类，通过动态链接库\n文件路径和方法名来调用 C++ 动态库中的方法。")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('javaCopy CodeNativeLibrary lib = NativeLibrary.getInstance("MyDll.dll");\nFunction doSomethingFunc = lib.getFunction("DoSomething");\ndoSomethingFunc.invoke(new Object[0]);\n\nFunction addFunc = lib.getFunction("Add");\nint result = (int)addFunc.invoke(Integer.class, new Object[] { 1, 2 });\n\nFunction swapFunc = lib.getFunction("Swap");\nPointer pa = new IntByReference(1).getPointer();\nPointer pb = new IntByReference(2).getPointer();\nswapFunc.invoke(new Object[] { pa, pb });\n\nFunction setPointFunc = lib.getFunction("SetPoint");\nPoint point = new Point();\npoint.x = 100;\npoint.y = 200;\nStructure struct = new Structure.ByValue(point);\nsetPointFunc.invoke(new Object[] { struct.getPointer() });\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br")])]),s("ul",[s("li",[s("ol",{attrs:{start:"4"}},[s("li",[n._v("在 C# 中使用 P/Invoke 进行调用。可以使用 DllImport 特性和 Marshal 类，通\n过动态链接库文件路径和方法名来调用 C++ 动态库中的方法。")])])])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('csharpCopy Codeclass Program {\n    [DllImport("MyDll.dll")]\n    public static extern void DoSomething();\n\n    [DllImport("MyDll.dll")]\n    public static extern int Add(int a, int b);\n\n    [DllImport("MyDll.dll")]\n    public static extern void Swap(ref int pa, ref int pb);\n\n    [StructLayout(LayoutKind.Sequential)]\n    public struct Point {\n        public int x;\n        public int y;\n    }\n\n    [DllImport("MyDll.dll")]\n    public static extern void SetPoint(ref Point p);\n}\n\nstatic void Main(string[] args) {\n    Program.DoSomething();\n    int result = Program.Add(1, 2);\n\n    int a = 1, b = 2;\n    Program.Swap(ref a, ref b);\n\n    Program.Point point = new Program.Point();\n    point.x = 100;\n    point.y = 200;\n    Program.SetPoint(ref point);\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br")])]),s("p",[n._v("以上是大致的实现思路和流程，具体实现时需要根据自己的需求进行调整和优化。希望这些信息对你有所帮助！")]),n._v(" "),s("h2",{attrs:{id:"_6-用c-定义一个动态库类包含图像buffer指针，图像宽高，长度，图像格式，保存图像接口参"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-用c-定义一个动态库类包含图像buffer指针，图像宽高，长度，图像格式，保存图像接口参"}},[n._v("#")]),n._v(" 6.用C++定义一个动态库类包含图像buffer指针，图像宽高，长度，图像格式，保存图像接口参")]),n._v(" "),s("p",[n._v("数为图像指针对象，字符串文件名，用JAVA jna调用接口存图接口")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('cppCopy Code// MyImage.h\n#pragma once\n\n#include <string>\n#include <cstdint>\n\n#ifdef MYIMAGE_EXPORTS\n#define MYIMAGE_API __declspec(dllexport)\n#else\n#define MYIMAGE_API __declspec(dllimport)\n#endif\n\nclass MYIMAGE_API MyImage {\npublic:\n    MyImage(int width, int height, int length, const std::string& format);\n    ~MyImage();\n\n    uint8_t* GetBuffer() const;\n    int GetWidth() const;\n    int GetHeight() const;\n    int GetLength() const;\n    std::string GetFormat() const;\n\n    void SaveImage(const std::string& filename);\n\nprivate:\n    uint8_t* buffer_;\n    int width_;\n    int height_;\n    int length_;\n    std::string format_;\n};\ncppCopy Code// MyImage.cpp\n#include "MyImage.h"\n#include <fstream>\n\nMyImage::MyImage(int width, int height, int length, const std::string& format)\n    : width_(width), height_(height), length_(length), format_(format)\n{\n    buffer_ = new uint8_t[length];\n}\n\nMyImage::~MyImage()\n{\n    delete[] buffer_;\n}\n\nuint8_t* MyImage::GetBuffer() const\n{\n    return buffer_;\n}\n\nint MyImage::GetWidth() const\n{\n    return width_;\n}\n\nint MyImage::GetHeight() const\n{\n    return height_;\n}\n\nint MyImage::GetLength() const\n{\n    return length_;\n}\n\nstd::string MyImage::GetFormat() const\n{\n    return format_;\n}\n\nvoid MyImage::SaveImage(const std::string& filename)\n{\n    std::ofstream file(filename, std::ios::out | std::ios::binary);\n    file.write(reinterpret_cast<char*>(buffer_), length_);\n    file.close();\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br"),s("span",{staticClass:"line-number"},[n._v("61")]),s("br"),s("span",{staticClass:"line-number"},[n._v("62")]),s("br"),s("span",{staticClass:"line-number"},[n._v("63")]),s("br"),s("span",{staticClass:"line-number"},[n._v("64")]),s("br"),s("span",{staticClass:"line-number"},[n._v("65")]),s("br"),s("span",{staticClass:"line-number"},[n._v("66")]),s("br"),s("span",{staticClass:"line-number"},[n._v("67")]),s("br"),s("span",{staticClass:"line-number"},[n._v("68")]),s("br"),s("span",{staticClass:"line-number"},[n._v("69")]),s("br"),s("span",{staticClass:"line-number"},[n._v("70")]),s("br"),s("span",{staticClass:"line-number"},[n._v("71")]),s("br"),s("span",{staticClass:"line-number"},[n._v("72")]),s("br"),s("span",{staticClass:"line-number"},[n._v("73")]),s("br"),s("span",{staticClass:"line-number"},[n._v("74")]),s("br"),s("span",{staticClass:"line-number"},[n._v("75")]),s("br"),s("span",{staticClass:"line-number"},[n._v("76")]),s("br"),s("span",{staticClass:"line-number"},[n._v("77")]),s("br"),s("span",{staticClass:"line-number"},[n._v("78")]),s("br")])]),s("p",[n._v("使用 JNA 调用：")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('javaCopy Codeimport com.sun.jna.Library;\nimport com.sun.jna.Native;\nimport com.sun.jna.Pointer;\n\npublic interface MyImageLibrary extends Library {\n    MyImageLibrary INSTANCE = Native.load("MyImage.dll", MyImageLibrary.class);\n\n    public static class MyImage extends Structure {\n        public Pointer buffer;\n        public int width;\n        public int height;\n        public int length;\n        public String format;\n\n        public MyImage(Pointer p) {\n            super(p);\n            read();\n        }\n\n        @Override\n        protected List<String> getFieldOrder() {\n            return Arrays.asList(new String[] { "buffer", "width", "height", "length", "format" });\n        }\n    }\n\n    MyImage createMyImage(int width, int height, int length, String format);\n    void deleteMyImage(Pointer p);\n    void saveImage(Pointer pMyImage, String filename);\n}\njavaCopy CodeMyImageLibrary.MyImage myImage = MyImageLibrary.INSTANCE.createMyImage(640, 480, 640*480*3, "RGB24");\nPointer buffer = myImage.buffer;\n// Copy image data to buffer\n// ...\n\n// Save image\nMyImageLibrary.INSTANCE.saveImage(myImage.getPointer(), "test.rgb");\n\nMyImageLibrary.INSTANCE.deleteMyImage(myImage.getPointer());\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br")])]),s("p",[n._v("在 Java 中需要引入 JNA 的相关库，具体可参考 JNA 的官方文档。")])])}],!1,null,null,null);s.default=t.exports}}]);